{% extends "base-center.html" %}
{% block content_center %}
    <div id="stats" class="alert alert-primary my-3" role="alert">
        Analysis and visualization of {{ stats['n_studies'] }} datasets containing {{ "{:,}".format(stats['n_cells']) }} individual samples.
    </div>
    <table class="table table-hover table-sm">
        <thead>
            <tr>
                <th></th>
                <th></th>
                <th>Label</th>
                <th>Description</th>
                <th>Samples</th>
                <th>Genes</th>
                <th>Submission date</th>
            </tr>
        </thead>
        <tbody>
            {% for gds in geo_datasets %}
            <tr>
                <td><a href="graph_page/{{ gds['id'] }}/PCA/2" class="btn btn-outline-info btn-sm">Launch Viewer</a></td>
                <td>
                    <a href="preprocess/{{ gds['upload']['_id']|string }}" class="btn btn-outline-info btn-sm">Dataset Upload Page</a>
                </td>
                <td>{{ gds['dataset_meta']['label'] }}</td>
                <td>{{ gds['dataset_meta']['description'] }}</td>
                <td>{{ gds['n_cells'] }}</td>
                <td>{{ gds['n_genes'] }}</td>
                <td>{{ gds['upload']['_id'].generation_time }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
{% block scripts %}
<script src="node_modules/datatables.net/js/jquery.dataTables.js"></script>
<script src="node_modules/datatables.net-bs4/js/dataTables.bootstrap4.js"></script>
<script src="node_modules/moment/min/moment.min.js"></script>
<script src="//cdn.datatables.net/plug-ins/1.10.19/sorting/datetime-moment.js"></script>
<script type="text/javascript">
    // init moment.js date column
    $.fn.dataTable.moment('MMM DD YYYY');
    $('.table').DataTable({
        ordering: true,
        pageLength: 25,
        order: [[5, 'desc']]
    })
</script>
{% endblock %}
